{% if contentDisplay %}
{% set layout = contentDisplay.layout | default("list") %}
{% set columns = contentDisplay.columns | default(1) %}

<div>
    <div>
        {% if contentDisplay.headline %}
        <h2>{{ contentDisplay.headline | safe }}</h2>
        {% endif %}
        
        {# If collection is set, use it, otherwise default to pagination #}
        {% set items = collections[contentDisplay.collection] | default(pagination.items | default([])) %}

        {% if contentDisplay.reverse %}
            {% set items = items | reverse %}
        {% endif %}

        {% if contentDisplay.size and contentDisplay.size > 0 %}
            {% set items = items.slice(0, contentDisplay.size) %}
        {% endif %}

        {% if items and items.length > 0 %}
            {% if layout == "list" or columns == 1 %}
                {% set containerClass = "" %}
            {% elif columns == 2 %}
                {% set containerClass = "" %}
            {% elif columns == 3 %}
                {% set containerClass = "" %}
            {% elif columns == 4 %}
                {% set containerClass = "" %}
            {% else %}
                {% set containerClass = "" %}
            {% endif %}
            
            <div class="{{ containerClass }}">
                <div class="grid {% if columns > 1 %}gap-4{% endif %}">
                    {% for item in items %}
                    <div class="bg-[var(--color-surface)] hover:bg-[var(--color-accent-strong)]/10 transition-colors duration-200 flex flex-col">
                        {% set itemUrl = item.url | url | default("#") %}
                        {% set itemTitle = item.data.title | default("Untitled Item") %}
                        <a href="{{ itemUrl }}" class="block h-full flex flex-col focus:outline-none focus:ring-1 focus:ring-[var(--color-accent-strong)]">
                            <h3 class="font-medium text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] mb-{% if columns == 1 %}1{% else %}2{% endif %} {% if columns > 1 %}line-clamp-2{% endif %}">
                                {{ itemTitle }}
                            </h3>
                            {% if item.date %}
                            <p class="text-[var(--color-text)]/{% if columns == 1 %}80{% else %}70{% endif %} mb-{% if columns == 1 %}1{% else %}2{% endif %}">{{ item.date | formatDateLong }}</p>
                            {% endif %}
                            {% if item.data.description %}
                            <p class="text-[var(--color-text)]/90 {% if columns > 1 %}line-clamp-3 flex-grow{% endif %}">{{ item.data.description }}</p>
                            {% endif %}
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        {% else %}
        <p>{{ contentDisplay.emptyText | default("No items to display.") }}</p>
        {% endif %}
    </div>
</div>
{% endif %}

